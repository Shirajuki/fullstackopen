{"version":3,"sources":["services/persons.js","components/Persons.jsx","components/PersonForm.jsx","components/Filter.jsx","components/Notification.js","App.js","index.js"],"names":["baseUrl","service","getAll","axios","get","create","newObject","post","update","id","put","deleteEntry","delete","Person","person","deletePerson","name","number","onClick","Persons","persons","filter","toLowerCase","includes","map","PersonForm","onSubmit","newName","newNumber","setNewName","setNewNumber","value","onChange","event","target","type","Filter","setValue","Notification","error","message","undefined","className","App","useState","setPersons","setFilter","errorMessage","setErrorMessage","useEffect","personService","then","res","data","preventDefault","personObj","window","alert","find","confirm","_","copy","p","catch","setTimeout","console","log","response","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9cd2571b.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject);\n};\n\nconst deleteEntry = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst service = { getAll, create, update, deleteEntry };\nexport default service;\n","const Person = ({ person, deletePerson }) => (\n  <p>\n    {person.name} {person.number}\n    <button onClick={() => deletePerson(person.id, person.name)}>delete</button>\n  </p>\n);\nconst Persons = ({ persons, filter, deletePerson }) => {\n  return persons\n    .filter((person) => person.name.toLowerCase().includes(filter))\n    .map((person) => {\n      return (\n        <Person key={person.name} person={person} deletePerson={deletePerson} />\n      );\n    });\n};\nexport default Persons;\n","const PersonForm = ({\n  onSubmit,\n  newName,\n  newNumber,\n  setNewName,\n  setNewNumber,\n}) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name:{\" \"}\n        <input\n          id=\"name\"\n          value={newName}\n          onChange={(event) => setNewName(event.target.value)}\n        />\n      </div>\n      <div>\n        number:{\" \"}\n        <input\n          id=\"number\"\n          value={newNumber}\n          onChange={(event) => setNewNumber(event.target.value)}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\nexport default PersonForm;\n","const Filter = ({ value, setValue }) => {\n  return (\n    <div>\n      filter shown with{\" \"}\n      <input\n        id=\"filter\"\n        value={value}\n        onChange={(event) => setValue(event.target.value.toLowerCase())}\n      />\n    </div>\n  );\n};\nexport default Filter;\n","const Notification = ({ error }) => {\n  if (error?.message === \"\" || error?.message === undefined) {\n    return <></>;\n  }\n\n  return (\n    <div className={error?.type === \"error\" ? \"error\" : \"success\"}>\n      {error?.message}\n    </div>\n  );\n};\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState({\n    message: \"\",\n    type: \"error\",\n  });\n\n  useEffect(() => {\n    personService.getAll().then((res) => {\n      setPersons(res.data);\n    });\n  }, []);\n\n  const deletePerson = (id, name) => {\n    if (window.confirm(`Delete ${name} ?`)) {\n      personService\n        .deleteEntry(id)\n        .then((_) => {\n          setPersons(persons.filter((person) => person.id !== id));\n          setErrorMessage({\n            message: `Successfully deleted ${name}`,\n            type: \"success\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        })\n        .catch((_) => {\n          setErrorMessage({\n            message: `The person ${name} has already been removed from the server`,\n            type: \"error\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        });\n    }\n  };\n  const addPersons = (event) => {\n    event.preventDefault();\n    const name = newName;\n    const number = newNumber;\n    const personObj = { name, number };\n    if (name === \"\" || name === undefined) {\n      window.alert(\"Please input a valid name!\");\n    } else if (persons.map((person) => person.name).includes(name)) {\n      const person = persons.find((person) => person.name.includes(name));\n      if (person.number !== number) {\n        if (\n          window.confirm(\n            `${name} is already added to phonebook, replace old number with a new one?`\n          )\n        ) {\n          personService\n            .update(person.id, personObj)\n            .then((_) => {\n              const copy = persons.map((p) =>\n                p.id === person.id ? personObj : p\n              );\n              setPersons(copy);\n            })\n            .catch((_) => {\n              setErrorMessage({\n                message: `The person ${name} has already been removed from the server`,\n                type: \"error\",\n              });\n              setTimeout(() => {\n                setErrorMessage(null);\n              }, 3000);\n            });\n        }\n      } else window.alert(`${name} is already added to phonebook`);\n    } else {\n      // Reset values\n      setNewName(\"\");\n      setNewNumber(\"\");\n      personService\n        .create(personObj)\n        .then((res) => {\n          console.log(res);\n          // Add new person to persons state\n          setPersons([...persons, personObj]);\n          setErrorMessage({\n            message: `Added ${personObj.name}`,\n            type: \"success\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        })\n        .catch((error) => {\n          setErrorMessage({\n            message: error.response.data,\n            type: \"error\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        });\n    }\n  };\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification error={errorMessage} />\n      <Filter value={filter} setValue={setFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        onSubmit={addPersons}\n        newName={newName}\n        setNewName={setNewName}\n        newNumber={newNumber}\n        setNewNumber={setNewNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}