{"version":3,"sources":["services/persons.js","components/Persons.jsx","components/PersonForm.jsx","components/Filter.jsx","components/Notification.js","App.js","index.js"],"names":["baseUrl","service","getAll","axios","get","create","newObject","post","update","id","put","deleteEntry","delete","Person","person","deletePerson","name","number","onClick","Persons","persons","filter","toLowerCase","includes","map","PersonForm","onSubmit","newName","newNumber","setNewName","setNewNumber","value","onChange","event","target","type","Filter","setValue","Notification","error","console","log","message","undefined","className","App","useState","setPersons","setFilter","errorMessage","setErrorMessage","useEffect","personService","then","res","data","preventDefault","personObj","window","alert","find","confirm","_","copy","p","catch","setTimeout","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cb86c08b.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject);\n};\n\nconst deleteEntry = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst service = { getAll, create, update, deleteEntry };\nexport default service;\n","const Person = ({ person, deletePerson }) => (\n  <p>\n    {person.name} {person.number}\n    <button onClick={() => deletePerson(person.id, person.name)}>delete</button>\n  </p>\n);\nconst Persons = ({ persons, filter, deletePerson }) => {\n  return persons\n    .filter((person) => person.name.toLowerCase().includes(filter))\n    .map((person) => {\n      return (\n        <Person key={person.name} person={person} deletePerson={deletePerson} />\n      );\n    });\n};\nexport default Persons;\n","const PersonForm = ({\n  onSubmit,\n  newName,\n  newNumber,\n  setNewName,\n  setNewNumber,\n}) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name:{\" \"}\n        <input\n          id=\"name\"\n          value={newName}\n          onChange={(event) => setNewName(event.target.value)}\n        />\n      </div>\n      <div>\n        number:{\" \"}\n        <input\n          id=\"number\"\n          value={newNumber}\n          onChange={(event) => setNewNumber(event.target.value)}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\nexport default PersonForm;\n","const Filter = ({ value, setValue }) => {\n  return (\n    <div>\n      filter shown with{\" \"}\n      <input\n        id=\"filter\"\n        value={value}\n        onChange={(event) => setValue(event.target.value.toLowerCase())}\n      />\n    </div>\n  );\n};\nexport default Filter;\n","const Notification = ({ error }) => {\n  console.log(error);\n  if (error?.message === \"\" || error?.message === undefined) {\n    return <></>;\n  }\n\n  return (\n    <div className={error?.type === \"error\" ? \"error\" : \"success\"}>\n      {error?.message}\n    </div>\n  );\n};\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport Persons from \"./components/Persons\";\nimport PersonForm from \"./components/PersonForm\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState({\n    message: \"\",\n    type: \"error\",\n  });\n\n  useEffect(() => {\n    personService.getAll().then((res) => {\n      setPersons(res.data);\n    });\n  }, []);\n\n  const deletePerson = (id, name) => {\n    if (window.confirm(`Delete ${name} ?`)) {\n      personService\n        .deleteEntry(id)\n        .then((_) => {\n          setPersons(persons.filter((person) => person.id !== id));\n          setErrorMessage({\n            message: `Successfully deleted ${name}`,\n            type: \"success\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        })\n        .catch((_) => {\n          setErrorMessage({\n            message: `The person ${name} has already been removed from the server`,\n            type: \"error\",\n          });\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        });\n    }\n  };\n  const addPersons = (event) => {\n    event.preventDefault();\n    const name = newName;\n    const number = newNumber;\n    const personObj = { name, number };\n    if (name === \"\" || name === undefined) {\n      window.alert(\"Please input a valid name!\");\n    } else if (persons.map((person) => person.name).includes(name)) {\n      const person = persons.find((person) => person.name.includes(name));\n      if (person.number !== number) {\n        if (\n          window.confirm(\n            `${name} is already added to phonebook, replace old number with a new one?`\n          )\n        ) {\n          personService\n            .update(person.id, personObj)\n            .then((_) => {\n              const copy = persons.map((p) =>\n                p.id === person.id ? personObj : p\n              );\n              setPersons(copy);\n            })\n            .catch((_) => {\n              setErrorMessage({\n                message: `The person ${name} has already been removed from the server`,\n                type: \"error\",\n              });\n              setTimeout(() => {\n                setErrorMessage(null);\n              }, 3000);\n            });\n        }\n      } else window.alert(`${name} is already added to phonebook`);\n    } else {\n      // Reset values\n      setNewName(\"\");\n      setNewNumber(\"\");\n      personService.create(personObj).then((res) => {\n        console.log(res);\n      });\n      // Add new person to persons state\n      setPersons([...persons, personObj]);\n      setErrorMessage({ message: `Added ${personObj.name}`, type: \"success\" });\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 3000);\n    }\n  };\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification error={errorMessage} />\n      <Filter value={filter} setValue={setFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        onSubmit={addPersons}\n        newName={newName}\n        setNewName={setNewName}\n        newNumber={newNumber}\n        setNewNumber={setNewNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}